__NUXT_JSONP__("/blog/post/data-issue-2021-01", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay){return {data:[{post:{slug:"data-issue-2021-01",description:"2021-06-17 ~ 2021-10-30，因為 591 實施漸進式改版，改變資料讀取方式，導致這段時間遺失部份資料。\n本文將說明改版影響範圍、資料遺失的補救方式，並附上詳細解釋、原始資料，以及代辦事項。",title:"2021 591 改版影響評估（2021-01 號爬蟲錯誤）",author:"ddio",created:"2022-09-11T00:00:00.000Z",cover:"\u002Fimgs\u002Fblog\u002F591-migration.png",tags:["資料錯誤","591租屋網"],toc:[{id:y,depth:E,text:y},{id:P,depth:t,text:Q},{id:R,depth:t,text:S},{id:T,depth:t,text:U},{id:z,depth:E,text:z},{id:A,depth:t,text:A},{id:B,depth:t,text:B},{id:C,depth:t,text:C},{id:D,depth:E,text:D}],body:{type:V,children:[{type:b,tag:g,props:{},children:[{type:a,value:W}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:X}]},{type:a,value:d},{type:a,value:d},{type:b,tag:F,props:{id:y},children:[{type:b,tag:h,props:{href:"#%E7%B0%A1%E5%96%AE%E8%AA%AA%E6%98%8E%E8%88%87%E7%B5%90%E8%AB%96",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:y}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"2021-06 ~ 2021-10 、2021-Q2 ~ 2021-Q4 的資料集，因為部份皆有部份資料遺失，因此："}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"出租屋件的數量統計，並不準確，特別是 2021-10 與 2021-Q4 ，目前尚未找到合理的推估方式，建議避免使用"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"出租屋件的各欄位的分析，除了上述的兩個區間外，皆可使用，因為有機會可以反應母體。\n"},{type:b,tag:u,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:Y},{type:b,tag:h,props:{href:Z,rel:[p,q,r],target:s},children:[{type:a,value:_}]},{type:a,value:G}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"2021 全年資料，除了遺失少數僅存在於 2021-06 ~ 2021-09 的物件，導致總數稍微減少外，針對各欄位的分析，皆可進行。"}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:v,props:{id:P},children:[{type:b,tag:h,props:{href:"#%E7%89%A9%E4%BB%B6%E7%BC%BA%E5%A4%B1%E7%9A%84%E8%B3%87%E6%96%99%E9%9B%86",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:Q}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:H,props:{},children:[{type:b,tag:I,props:{},children:[{type:b,tag:f,props:{},children:[{type:b,tag:i,props:{},children:[{type:a,value:J}]},{type:b,tag:i,props:{},children:[{type:a,value:"每月資料總數"}]},{type:b,tag:i,props:{},children:[{type:a,value:"每月推估總數"}]},{type:b,tag:i,props:{},children:[{type:a,value:"推估資料遺失率"}]}]}]},{type:b,tag:K,props:{},children:[{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:L}]},{type:b,tag:c,props:{},children:[{type:a,value:$}]},{type:b,tag:c,props:{},children:[{type:a,value:aa}]},{type:b,tag:c,props:{},children:[{type:a,value:ab}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ac}]},{type:b,tag:c,props:{},children:[{type:a,value:ad}]},{type:b,tag:c,props:{},children:[{type:a,value:ae}]},{type:b,tag:c,props:{},children:[{type:a,value:af}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:M}]},{type:b,tag:c,props:{},children:[{type:a,value:ag}]},{type:b,tag:c,props:{},children:[{type:a,value:ah}]},{type:b,tag:c,props:{},children:[{type:a,value:ai}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:N}]},{type:b,tag:c,props:{},children:[{type:a,value:aj}]},{type:b,tag:c,props:{},children:[{type:a,value:ak}]},{type:b,tag:c,props:{},children:[{type:a,value:al}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:O}]},{type:b,tag:c,props:{},children:[{type:a,value:am}]},{type:b,tag:c,props:{},children:[{type:a,value:an}]},{type:b,tag:c,props:{},children:[{type:a,value:ao}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ap}]},{type:b,tag:c,props:{},children:[{type:a,value:aq}]},{type:b,tag:c,props:{},children:[{type:a,value:ar}]},{type:b,tag:c,props:{},children:[{type:a,value:as}]}]}]}]},{type:a,value:d},{type:b,tag:v,props:{id:R},children:[{type:b,tag:h,props:{href:"#%E5%BB%BA%E8%AD%B0%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E8%B3%87%E6%96%99%E9%9B%86",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:S}]},{type:a,value:d},{type:b,tag:u,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:at}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"2021-Q4"}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:v,props:{id:T},children:[{type:b,tag:h,props:{href:"#%E5%8F%AF%E4%BD%BF%E7%94%A8%E7%9A%84%E8%B3%87%E6%96%99%E9%9B%86",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:U}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"2021-11 之後，以及 2021 全年資料"}]},{type:a,value:d},{type:b,tag:F,props:{id:z},children:[{type:b,tag:h,props:{href:"#%E8%83%8C%E6%99%AF%E8%B3%87%E8%A8%8A",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:z}]},{type:a,value:d},{type:b,tag:v,props:{id:A},children:[{type:b,tag:h,props:{href:"#%E8%B3%87%E6%96%99%E6%A0%BC%E5%BC%8F%E6%94%B9%E7%89%88%E7%9A%84%E5%BD%B1%E9%9F%BF",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:A}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"2021-06-17 ~ 2021-10-30，因為 591 實施漸進式改版，改變資料讀取方式，導致這段時間遺失部份資料。以下將以「新版格式」、「舊版格式」，區分 591 在這次改版中，不同出租屋件資料形式。"}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"舊版格式：\n"},{type:b,tag:u,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"只的是原本的物件格式，從 06-17 後佔比逐漸降低，並在 09-27 後正式淘汰"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"舊版格式以 HTML"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"新版格式：\n"},{type:b,tag:u,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"指的是改版後的物件格式，從 06-17 開始出現，從一開始的佔比 35% ，一直到 09-26 的 40% ，並在 09-27 後，所有出租物件皆改以新版格式呈現"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"新版格式以 JSON 為主"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"在這次的改版中，雖然租屋物件清單的讀取方式不變，但由於物件詳細資訊的新舊版格式的擷取方式完全不同，造成爬蟲機器人「抓得到租屋清單，以及清單中附帶的少數欄位，但卻找不到詳細資訊」的狀況。"}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"根據"},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fg0v\u002Ftw-rental-house-data\u002Fblob\u002Ff0795567f2bce3bd6d9c3bfea4a8171b8e78923b\u002Fcrawler\u002Fcrawler\u002Fspiders\u002Flist591_spider.py#L114",rel:[p,q,r],target:s},children:[{type:a,value:"當時的程式碼"}]},{type:a,value:"，在租屋清單中，爬蟲機器人會儲存以下欄位如下："}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"交易與物件基本資訊\n"},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"物件編號"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"租屋平台"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"物件網址"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"物件首次發現時間"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"物件最後更新時間"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"縣市"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"鄉鎮市區"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"物件硬體資訊\n"},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"物件類型"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"坪數"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"所在樓層"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"建物樓高"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"價位資訊\n"},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"月租金"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:v,props:{id:B},children:[{type:b,tag:h,props:{href:"#%E5%B0%8D%E5%AE%9A%E6%9C%9F%E8%B3%87%E6%96%99%E7%9A%84%E5%BD%B1%E9%9F%BF",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:B}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"時間方面，則可分為「潛伏期」與「重建期」："}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"潛伏期：\n"},{type:b,tag:u,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"2021-06 ~ 2021-09 ，由於此時尚未發現 591 開始改版，加上資料匯出的程式，會自動去除資訊不完整的物件，因此這四個月，包含 2021 第三季的資料，都少了大約 35% 的資料。"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"重建期：\n"},{type:b,tag:u,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"在九月底發現問題後，新版爬蟲機器人，於 2021-10-28 上線，並在 10-30 & 31 兩天，全面更新所有缺乏詳細資料的刊登物件"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"2021-10 與 2021 第四季的資料，皆包含了過去四個月的所有刊登物件，僅供此次問題分析，不建議用在租屋市場統計"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"2021-11 開始，爬蟲恢復正常"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:v,props:{id:C},children:[{type:b,tag:h,props:{href:"#%E9%81%BA%E5%A4%B1%E7%89%A9%E4%BB%B6%E7%9A%84%E8%BC%AA%E5%BB%93%E6%8E%A8%E6%B8%AC",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:C}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"從物件編號分析，可發現每日找到的「新版格式」物件，散佈於所有編號中，推測 591 是將新版格式，隨機套用在不分新舊、不分是否已經刊登的物件中，因此可以假設 6-9 月的資料集中，雖然數量較小，但各類物件的分佈，有可能還是可以反應母體的。"}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:Y},{type:b,tag:h,props:{href:Z,rel:[p,q,r],target:s},children:[{type:a,value:_}]},{type:a,value:G}]},{type:a,value:d},{type:b,tag:"blockquote",props:{},children:[{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"在分析資料時，為保持邏輯一致，皆以以下 SQL 條件，作為「新版格式」的條件：\n"},{type:b,tag:x,props:{},children:[{type:a,value:"where additional_fee is null and floor is not null"}]}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"其中 "},{type:b,tag:x,props:{},children:[{type:a,value:"additional_fee"}]},{type:a,value:" 是只有舊版格式才有的資料，而 "},{type:b,tag:x,props:{},children:[{type:a,value:"floor"}]},{type:a,value:" 則是物件清單就有的資料，加上後者，是為了確定該物件為房屋物件。這樣過濾規，雖然可以確定找到新版格式的物件，但也有可能找到「最近新開啟，但又被刊登者關掉」的物件。但由於目前留下的紀錄中，無法更細第區分這兩者，因此分析時，須額外留意。"}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"以下為 4 ~ 11 月的逐日資料中，新版、舊版物件的編號範圍（新版亦包含被關閉的物件）："}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:H,props:{},children:[{type:b,tag:I,props:{},children:[{type:b,tag:f,props:{},children:[{type:b,tag:i,props:{},children:[{type:a,value:J}]},{type:b,tag:i,props:{},children:[{type:a,value:"新版-編號最小值"}]},{type:b,tag:i,props:{},children:[{type:a,value:"舊版-編號最小值"}]},{type:b,tag:i,props:{},children:[{type:a,value:"新版-編號最大值"}]},{type:b,tag:i,props:{},children:[{type:a,value:"舊版-編號最大值"}]}]}]},{type:b,tag:K,props:{},children:[{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:au}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,829,567"}]},{type:b,tag:c,props:{},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:"10,841,110"}]},{type:b,tag:c,props:{},children:[{type:a,value:"10,836,530"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:av}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,531,998"}]},{type:b,tag:c,props:{},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:"10,961,914"}]},{type:b,tag:c,props:{},children:[{type:a,value:"10,961,449"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:L}]},{type:b,tag:c,props:{},children:[{type:a,value:"197,629"}]},{type:b,tag:c,props:{},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,073,536"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,073,359"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:M}]},{type:b,tag:c,props:{},children:[{type:a,value:"160,181"}]},{type:b,tag:c,props:{},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,218,672"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,216,467"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:N}]},{type:b,tag:c,props:{},children:[{type:a,value:"435,377"}]},{type:b,tag:c,props:{},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,363,468"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,361,174"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:O}]},{type:b,tag:c,props:{},children:[{type:a,value:aw}]},{type:b,tag:c,props:{},children:[{type:a,value:"6,782,265"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,499,636"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,479,023"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:at}]},{type:b,tag:c,props:{},children:[{type:a,value:aw}]},{type:b,tag:c,props:{},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,642,009"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,639,971"}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ax}]},{type:b,tag:c,props:{},children:[{type:a,value:"3,376,273"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,018,452"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,784,011"}]},{type:b,tag:c,props:{},children:[{type:a,value:"11,782,698"}]}]}]}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"另外，也使用以下 SQL ，確認被標為新版格式後，該物件是否有機會改為舊版格式，結果 "},{type:b,tag:x,props:{},children:[{type:a,value:"count"}]},{type:a,value:" 皆為 0 ："}]},{type:a,value:d},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-text","line-numbers"]},children:[{type:b,tag:x,props:{},children:[{type:a,value:"select year, month, day, count(*) from house_ts where\n  year = 2021 and month \u003E= 7 and month \u003C= 11 and \n  additional_fee is not null and floor is not null \n  and vendor_house_id in (\n    select vendor_house_id from house_ts where year = 2021 and month = 7 and day = 10 \n    and additional_fee is null and floor is not null order by vendor_house_id desc limit 10\n  ) \n  group by year, month, day order by month, day;\n"}]}]}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"從上述兩者可以發現："}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"新版編號的最小值不穩定，但舊版則相反\n"},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"已經被標為舊版格式的物件，就會維持舊版"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"已被標為新版格式得物件，就會維持新版"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"新舊版物件的最大值皆逐漸遞增\n"},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"可見新物件並非一定皆為新版或舊版格式"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"但新版的最大值總是比舊版大，但不確定是因為被關掉了，還是因為是新版格式"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"可由每月的「新版數量：舊版數量」，回推當月刊登物件總量\n"},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"因為物件的資料版本確定後，就不會再變化，且已知每日新舊版本的物件數量、每月舊版物件數量後，可回推每月刊登物件總數"}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"以下為逐日累計的每月新版格式佔比（十月資料全部重爬，不適用上述觀察）："}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:H,props:{},children:[{type:b,tag:I,props:{},children:[{type:b,tag:f,props:{},children:[{type:b,tag:i,props:{},children:[{type:a,value:J}]},{type:b,tag:i,props:{},children:[{type:a,value:"逐日累計(A)"}]},{type:b,tag:i,props:{},children:[{type:a,value:"逐日舊版累計(B)"}]},{type:b,tag:i,props:{},children:[{type:a,value:"逐日舊版佔比( C)"}]},{type:b,tag:i,props:{},children:[{type:a,value:"每月舊版總數(D)"}]},{type:b,tag:i,props:{},children:[{type:a,value:"每月推估總數(E)"}]},{type:b,tag:i,props:{},children:[{type:a,value:"推估資料遺失率(F)"}]}]}]},{type:b,tag:K,props:{},children:[{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:au}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,844,504"}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,798,596"}]},{type:b,tag:c,props:{},children:[{type:a,value:"97.5%"}]},{type:b,tag:c,props:{},children:[{type:a,value:"159,625"}]},{type:b,tag:c,props:{},children:[{type:a,value:"159,493"}]},{type:b,tag:c,props:{},children:[]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:av}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,791,941"}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,744,461"}]},{type:b,tag:c,props:{},children:[{type:a,value:"97.4%"}]},{type:b,tag:c,props:{},children:[{type:a,value:"148,522"}]},{type:b,tag:c,props:{},children:[{type:a,value:"148,645"}]},{type:b,tag:c,props:{},children:[]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:L}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,428,470"}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,170,267"}]},{type:b,tag:c,props:{},children:[{type:a,value:"91.6%"}]},{type:b,tag:c,props:{},children:[{type:a,value:$}]},{type:b,tag:c,props:{},children:[{type:a,value:aa}]},{type:b,tag:c,props:{},children:[{type:a,value:ab}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:M}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,709,516"}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,083,291"}]},{type:b,tag:c,props:{},children:[{type:a,value:"63.4%"}]},{type:b,tag:c,props:{},children:[{type:a,value:ag}]},{type:b,tag:c,props:{},children:[{type:a,value:ah}]},{type:b,tag:c,props:{},children:[{type:a,value:ai}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:N}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,828,386"}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,125,476"}]},{type:b,tag:c,props:{},children:[{type:a,value:"61.6%"}]},{type:b,tag:c,props:{},children:[{type:a,value:aj}]},{type:b,tag:c,props:{},children:[{type:a,value:ak}]},{type:b,tag:c,props:{},children:[{type:a,value:al}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:O}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,745,074"}]},{type:b,tag:c,props:{},children:[{type:a,value:"927,989"}]},{type:b,tag:c,props:{},children:[{type:a,value:"53.2%"}]},{type:b,tag:c,props:{},children:[{type:a,value:am}]},{type:b,tag:c,props:{},children:[{type:a,value:an}]},{type:b,tag:c,props:{},children:[{type:a,value:ao}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ax}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,795,469"}]},{type:b,tag:c,props:{},children:[{type:a,value:"1,766,897"}]},{type:b,tag:c,props:{},children:[{type:a,value:"98.4%"}]},{type:b,tag:c,props:{},children:[{type:a,value:"161,330"}]},{type:b,tag:c,props:{},children:[{type:a,value:"163,939"}]},{type:b,tag:c,props:{},children:[]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ac}]},{type:b,tag:c,props:{},children:[{type:a,value:"5,064,915"}]},{type:b,tag:c,props:{},children:[{type:a,value:"4,713,324"}]},{type:b,tag:c,props:{},children:[{type:a,value:"93.1%"}]},{type:b,tag:c,props:{},children:[{type:a,value:ad}]},{type:b,tag:c,props:{},children:[{type:a,value:ae}]},{type:b,tag:c,props:{},children:[{type:a,value:af}]}]},{type:b,tag:f,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ap}]},{type:b,tag:c,props:{},children:[{type:a,value:"5,282,976"}]},{type:b,tag:c,props:{},children:[{type:a,value:"3,136,756"}]},{type:b,tag:c,props:{},children:[{type:a,value:"59.4%"}]},{type:b,tag:c,props:{},children:[{type:a,value:aq}]},{type:b,tag:c,props:{},children:[{type:a,value:ar}]},{type:b,tag:c,props:{},children:[{type:a,value:as}]}]}]}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"各欄的關係如下："}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"C = B \u002F A"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"D 為既有每月匯出程式跑出的結果，因為內建過濾不完整的物件，所以只會留下舊版格式的物件"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"E = D * Average(四月 C, 五月 C) \u002F C"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"F = (E - D) \u002F E"}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"若想取得逐日的資料，請參見"},{type:b,tag:h,props:{href:"https:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1DWBE4aJ_mFf1p5hv5KzU9aHDWCRxmZKC3a59CiL4rF4\u002Fedit#gid=940939195",rel:[p,q,r],target:s},children:[{type:a,value:"此試算表"}]},{type:a,value:G}]},{type:a,value:d},{type:b,tag:F,props:{id:D},children:[{type:b,tag:h,props:{href:"#%E9%87%9D%E5%B0%8D%E6%AD%A4%E6%AC%A1%E5%95%8F%E9%A1%8C%E7%9A%84%E9%81%BF%E5%85%8D%E6%96%B9%E5%BC%8F",ariaHidden:k,tabIndex:l},children:[{type:b,tag:m,props:{className:[n,o]},children:[]}]},{type:a,value:D}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"如同在"},{type:b,tag:"nuxt-link",props:{to:"\u002Fblog\u002Fpost\u002Fresurrection\u002F"},children:[{type:a,value:"這篇文章"}]},{type:a,value:"提到的，除了 591 改版外，會發生這次歷時 5 個月，而且造成無法修補的問題，是由於多重因素疊加後的結果，並非可以簡單避免的問題。"}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"針對這樣的情況，目前已經進行的處理是："}]},{type:a,value:d},{type:b,tag:j,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"將爬蟲機器人的邏輯取出，成為"},{type:b,tag:h,props:{href:"https:\u002F\u002Fpypi.org\u002Fproject\u002Fscrapy-tw-rental-house\u002F",rel:[p,q,r],target:s},children:[{type:a,value:"獨立的模組"}]},{type:a,value:"，方便修改以及增加"},{type:b,tag:h,props:{href:"https:\u002F\u002Fzh.wikipedia.org\u002Fzh-tw\u002F%E5%B7%B4%E5%A3%AB%E5%9B%A0%E5%AD%90",rel:[p,q,r],target:s},children:[{type:a,value:"公車係數"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fg0v\u002Ftw-rental-house-data\u002Fissues\u002F115",rel:[p,q,r],target:s},children:[{type:a,value:"更新網站架構"}]},{type:a,value:"，並"},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fg0v\u002Ftw-rental-house-data\u002Fissues\u002F47",rel:[p,q,r],target:s},children:[{type:a,value:"設計新的爬蟲架構，讓它更容易自動化"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"把爬蟲搬到較有管理彈性的地方"}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"儘管如此，由於 ddio 接下來還是有各種想做的事，無法專職維護這個資料集，因此除了盡力確保爬蟲機器人的健康狀態外，並無法確保所有問題，都能馬上得到解決。"}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:"新版的爬蟲，從 2021-11 運作至今，已經將近一年，目前為止尚未發現其他重大問題，但為了使專案能夠持續運作，也歡迎對於資料狀況、爬蟲狀況自動監測有興趣的人，來"},{type:b,tag:h,props:{href:"mailto:hi@ddio.io"},children:[{type:a,value:"聯絡 ddio"}]},{type:a,value:"，或是到 "},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fg0v\u002Ftw-rental-house-data\u002Fissues",rel:[p,q,r],target:s},children:[{type:a,value:"Github"}]},{type:a,value:"提議。"}]}]},excerpt:{type:V,children:[{type:b,tag:g,props:{},children:[{type:a,value:W}]},{type:a,value:d},{type:b,tag:g,props:{},children:[{type:a,value:X}]}]},dir:"\u002Fblog",path:"\u002Fblog\u002Fdata-issue-2021-01",extension:".md",createdAt:ay,updatedAt:ay}}],fetch:{},mutations:void 0}}("text","element","td","\n","li","tr","p","a","th","ol","true",-1,"span","icon","icon-link","nofollow","noopener","noreferrer","_blank",3,"ul","h3","6,696,154","code","簡單說明與結論","背景資訊","資料格式改版的影響","對定期資料的影響","遺失物件的輪廓推測","針對此次問題的避免方式",2,"h2","。","table","thead","月份","tbody","2021-06","2021-07","2021-08","2021-09","物件缺失的資料集","物件缺失的資料集：","建議避免使用的資料集","建議避免使用的資料集：","可使用的資料集","可使用的資料集：","root","2021-06-17 ~ 2021-10-30，因為 591 實施漸進式改版，改變資料讀取方式，導致這段時間遺失部份資料。","本文將說明改版影響範圍、資料遺失的補救方式，並附上詳細解釋、原始資料，以及代辦事項。","若想進一步確認資料的代表性，歡迎","https:\u002F\u002Fgithub.com\u002Fg0v\u002Ftw-rental-house-data\u002Fissues\u002F129","認領這張票","117,610","125,145","6.02%","2021-Q2","320,459","335,516","4.49%","105,880","162,794","34.96%","102,071","161,559","36.82%","88,452","162,060","45.42%","2021-Q3","226,115","371,042","39.06%","2021-10","2021-04","2021-05","274,518","2021-11","2024-09-12T14:04:18.114Z")));